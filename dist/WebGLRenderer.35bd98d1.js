!function(){function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire94c2,r=t.register;r("hzcZD",function(r,n){e(r.exports,"WebGLRenderer",function(){return C});var i=t("3A7or"),s=t("i42Np"),a=t("iIv1T"),o=t("b6Srh"),l=t("6Er4G"),u=t("1NPGZ"),c=t("ejgKW"),_=t("8N45d"),h=t("lSql8"),f=t("8Hp4H"),d=t("gI9MA"),g=t("4BaIT"),m=t("5KSBR"),E=t("1ByBh"),p=t("bIMwU"),T=t("1pSfy"),S=t("gfZcM"),x=t("lgMFf"),b=t("edJNm"),R=t("2twcM");let v=[...u.SharedSystems,p.GlUboSystem,d.GlBackBufferSystem,h.GlContextSystem,_.GlBufferSystem,R.GlTextureSystem,T.GlRenderTargetSystem,f.GlGeometrySystem,x.GlUniformGroupSystem,S.GlShaderSystem,m.GlEncoderSystem,b.GlStateSystem,E.GlStencilSystem,g.GlColorMaskSystem],A=[...u.SharedRenderPipes],G=[o.GlBatchAdaptor,a.GlMeshAdaptor,s.GlGraphicsAdaptor],B=[],y=[],N=[];(0,i.extensions).handleByNamedList(i.ExtensionType.WebGLSystem,B),(0,i.extensions).handleByNamedList(i.ExtensionType.WebGLPipes,y),(0,i.extensions).handleByNamedList(i.ExtensionType.WebGLPipesAdaptor,N),(0,i.extensions).add(...v,...A,...G);class C extends l.AbstractRenderer{constructor(){super({name:"webgl",type:c.RendererType.WEBGL,systems:B,renderPipes:y,renderPipeAdaptors:N})}}}),r("i42Np",function(r,n){e(r.exports,"GlGraphicsAdaptor",function(){return g});var i=t("3A7or"),s=t("jfHwQ"),a=t("cLTfn"),o=t("6sEaf"),l=t("lPksw"),u=t("fr9CJ"),c=t("3pKBw"),_=t("i04eP"),h=t("UQg0L"),f=t("6ss2x"),d=t("iOPov");class g{init(){let e=new d.UniformGroup({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new s.Matrix,type:"mat3x3<f32>"},uRound:{value:0,type:"f32"}}),t=(0,a.getMaxTexturesPerBatch)(),r=(0,o.compileHighShaderGlProgram)({name:"graphics",bits:[l.colorBitGl,(0,u.generateTextureBatchBitGl)(t),c.localUniformBitGl,_.roundPixelsBitGl]});this.shader=new f.Shader({glProgram:r,resources:{localUniforms:e,batchSamplers:(0,h.getBatchSamplersUniformGroup)(t)}})}execute(e,t){let r=t.context,n=r.customShader||this.shader,i=e.renderer,{batcher:s,instructions:a}=i.graphicsContext.getContextRenderData(r);n.groups[0]=i.globalUniforms.bindGroup,i.state.set(e.state),i.shader.bind(n),i.geometry.bind(s.geometry,n.glProgram);let o=a.instructions;for(let e=0;e<a.instructionSize;e++){let t=o[e];if(t.size){for(let e=0;e<t.textures.count;e++)i.texture.bind(t.textures.textures[e],e);i.geometry.draw(t.topology,t.size,t.start)}}}destroy(){this.shader.destroy(!0),this.shader=null}}g.extension={type:[i.ExtensionType.WebGLPipesAdaptor],name:"graphics"}}),r("3pKBw",function(t,r){e(t.exports,"localUniformBit",function(){return n}),e(t.exports,"localUniformBitGroup2",function(){return i}),e(t.exports,"localUniformBitGl",function(){return s});let n={name:"local-uniform-bit",vertex:{header:`

            struct LocalUniforms {
                uTransformMatrix:mat3x3<f32>,
                uColor:vec4<f32>,
                uRound:f32,
            }

            @group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `}},i={...n,vertex:{...n.vertex,header:n.vertex.header.replace("group(1)","group(2)")}},s={name:"local-uniform-bit",vertex:{header:`

            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix = uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `}}}),r("iIv1T",function(r,n){e(r.exports,"GlMeshAdaptor",function(){return f});var i=t("3A7or"),s=t("jfHwQ"),a=t("6sEaf"),o=t("3pKBw"),l=t("i04eP"),u=t("d5Tr4"),c=t("6ss2x"),_=t("2ayin"),h=t("8wKXC");class f{init(){let e=(0,a.compileHighShaderGlProgram)({name:"mesh",bits:[o.localUniformBitGl,u.textureBitGl,l.roundPixelsBitGl]});this._shader=new c.Shader({glProgram:e,resources:{uTexture:_.Texture.EMPTY.source,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new s.Matrix}}}})}execute(e,t){let r=e.renderer,n=t._shader;if(n){if(!n.glProgram){(0,h.warn)("Mesh shader has no glProgram",t.shader);return}}else{n=this._shader;let e=t.texture,r=e.source;n.resources.uTexture=r,n.resources.uSampler=r.style,n.resources.textureUniforms.uniforms.uTextureMatrix=e.textureMatrix.mapCoord}n.groups[100]=r.globalUniforms.bindGroup,n.groups[101]=e.localUniformsBindGroup,r.encoder.draw({geometry:t._geometry,shader:n,state:t.state})}destroy(){this._shader.destroy(!0),this._shader=null}}f.extension={type:[i.ExtensionType.WebGLPipesAdaptor],name:"mesh"}}),r("b6Srh",function(r,n){e(r.exports,"GlBatchAdaptor",function(){return a});var i=t("3A7or"),s=t("cG8uY");class a{constructor(){this._tempState=(0,s.State).for2d(),this._didUploadHash={}}init(e){e.renderer.runners.contextChange.add(this)}contextChange(){this._didUploadHash={}}start(e,t,r){let n=e.renderer,i=this._didUploadHash[r.uid];n.shader.bind(r,i),i||(this._didUploadHash[r.uid]=!0),n.shader.updateUniformGroup(n.globalUniforms.uniformGroup),n.geometry.bind(t,r.glProgram)}execute(e,t){let r=e.renderer;this._tempState.blendMode=t.blendMode,r.state.set(this._tempState);let n=t.textures.textures;for(let e=0;e<t.textures.count;e++)r.texture.bind(n[e],e);r.geometry.draw(t.topology,t.size,t.start)}}a.extension={type:[i.ExtensionType.WebGLPipesAdaptor],name:"batch"}}),r("cG8uY",function(t,r){e(t.exports,"State",function(){return s});let n={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},i=class e{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(1&this.data)}set blend(e){!!(1&this.data)!==e&&(this.data^=1)}get offsets(){return!!(2&this.data)}set offsets(e){!!(2&this.data)!==e&&(this.data^=2)}set cullMode(e){if("none"===e){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace="front"===e}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(4&this.data)}set culling(e){!!(4&this.data)!==e&&(this.data^=4)}get depthTest(){return!!(8&this.data)}set depthTest(e){!!(8&this.data)!==e&&(this.data^=8)}get depthMask(){return!!(32&this.data)}set depthMask(e){!!(32&this.data)!==e&&(this.data^=32)}get clockwiseFrontFace(){return!!(16&this.data)}set clockwiseFrontFace(e){!!(16&this.data)!==e&&(this.data^=16)}get blendMode(){return this._blendMode}set blendMode(e){this.blend="none"!==e,this._blendMode=e,this._blendModeId=n[e]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){let t=new e;return t.depthTest=!1,t.blend=!0,t}};i.default2d=i.for2d();let s=i}),r("8N45d",function(r,n){e(r.exports,"GlBufferSystem",function(){return l});var i=t("3A7or"),s=t("6n7xY"),a=t("3n5LI"),o=t("bV4AE");class l{constructor(e){this._gpuBuffers=Object.create(null),this._boundBufferBases=Object.create(null),this._minBaseLocation=0,this._nextBindBaseIndex=this._minBaseLocation,this._bindCallId=0,this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_gpuBuffers")}destroy(){this._renderer=null,this._gl=null,this._gpuBuffers=null,this._boundBufferBases=null}contextChange(){let e=this._gl=this._renderer.gl;this._gpuBuffers=Object.create(null),this._maxBindings=e.MAX_UNIFORM_BUFFER_BINDINGS?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0}getGlBuffer(e){return this._gpuBuffers[e.uid]||this.createGLBuffer(e)}bind(e){let{_gl:t}=this,r=this.getGlBuffer(e);t.bindBuffer(r.type,r.buffer)}bindBufferBase(e,t){let{_gl:r}=this;this._boundBufferBases[t]!==e&&(this._boundBufferBases[t]=e,e._lastBindBaseLocation=t,r.bindBufferBase(r.UNIFORM_BUFFER,t,e.buffer))}nextBindBase(e){this._bindCallId++,this._minBaseLocation=0,e&&(this._boundBufferBases[0]=null,this._minBaseLocation=1,this._nextBindBaseIndex<1&&(this._nextBindBaseIndex=1))}freeLocationForBufferBase(e){let t=this.getLastBindBaseLocation(e);if(t>=this._minBaseLocation)return e._lastBindCallId=this._bindCallId,t;let r=0,n=this._nextBindBaseIndex;for(;r<2;){n>=this._maxBindings&&(n=this._minBaseLocation,r++);let e=this._boundBufferBases[n];if(e&&e._lastBindCallId===this._bindCallId){n++;continue}break}return(t=n,this._nextBindBaseIndex=n+1,r>=2)?-1:(e._lastBindCallId=this._bindCallId,this._boundBufferBases[t]=null,t)}getLastBindBaseLocation(e){let t=e._lastBindBaseLocation;return this._boundBufferBases[t]===e?t:-1}bindBufferRange(e,t,r,n){let{_gl:i}=this;r||(r=0),t||(t=0),this._boundBufferBases[t]=null,i.bindBufferRange(i.UNIFORM_BUFFER,t||0,e.buffer,256*r,n||256)}updateBuffer(e){let{_gl:t}=this,r=this.getGlBuffer(e);if(e._updateID===r.updateID)return r;r.updateID=e._updateID,t.bindBuffer(r.type,r.buffer);let n=e.data,i=e.descriptor.usage&s.BufferUsage.STATIC?t.STATIC_DRAW:t.DYNAMIC_DRAW;return n?r.byteLength>=n.byteLength?t.bufferSubData(r.type,0,n,0,e._updateSize/n.BYTES_PER_ELEMENT):(r.byteLength=n.byteLength,t.bufferData(r.type,n,i)):(r.byteLength=e.descriptor.size,t.bufferData(r.type,r.byteLength,i)),r}destroyAll(){let e=this._gl;for(let t in this._gpuBuffers)e.deleteBuffer(this._gpuBuffers[t].buffer);this._gpuBuffers=Object.create(null)}onBufferDestroy(e,t){let r=this._gpuBuffers[e.uid],n=this._gl;t||n.deleteBuffer(r.buffer),this._gpuBuffers[e.uid]=null}createGLBuffer(e){let{_gl:t}=this,r=a.BUFFER_TYPE.ARRAY_BUFFER;e.descriptor.usage&s.BufferUsage.INDEX?r=a.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER:e.descriptor.usage&s.BufferUsage.UNIFORM&&(r=a.BUFFER_TYPE.UNIFORM_BUFFER);let n=new o.GlBuffer(t.createBuffer(),r);return this._gpuBuffers[e.uid]=n,e.on("destroy",this.onBufferDestroy,this),n}resetState(){this._boundBufferBases=Object.create(null)}}l.extension={type:[i.ExtensionType.WebGLSystem],name:"buffer"}}),r("3n5LI",function(t,r){e(t.exports,"BUFFER_TYPE",function(){return i});var n,i=((n=i||{})[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",n)}),r("bV4AE",function(t,r){e(t.exports,"GlBuffer",function(){return n});class n{constructor(e,t){this._lastBindBaseLocation=-1,this._lastBindCallId=-1,this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.type=t}}}),r("lSql8",function(r,n){e(r.exports,"GlContextSystem",function(){return l});var i=t("4k0ap"),s=t("3A7or"),a=t("8wKXC");let o=class e{constructor(e){this.supports={uint32Indices:!0,uniformBufferObject:!0,vertexArrayObject:!0,srgbTextures:!0,nonPowOf2wrapping:!0,msaa:!0,nonPowOf2mipmaps:!0},this._renderer=e,this.extensions=Object.create(null),this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this._renderer.gl=e}init(t){t={...e.defaultOptions,...t};let r=this.multiView=t.multiView;if(t.context&&r&&((0,a.warn)("Renderer created with both a context and multiview enabled. Disabling multiView as both cannot work together."),r=!1),r?this.canvas=(0,i.DOMAdapter).get().createCanvas(this._renderer.canvas.width,this._renderer.canvas.height):this.canvas=this._renderer.view.canvas,t.context)this.initFromContext(t.context);else{let e=this._renderer.background.alpha<1,r=t.premultipliedAlpha??!0,n=t.antialias&&!this._renderer.backBuffer.useBackBuffer;this.createContext(t.preferWebGLVersion,{alpha:e,premultipliedAlpha:r,antialias:n,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference??"default"})}}ensureCanvasSize(e){if(!this.multiView){e!==this.canvas&&(0,a.warn)("multiView is disabled, but targetCanvas is not the main canvas");return}let{canvas:t}=this;(t.width<e.width||t.height<e.height)&&(t.width=Math.max(e.width,e.width),t.height=Math.max(e.height,e.height))}initFromContext(e){this.gl=e,this.webGLVersion=e instanceof(0,i.DOMAdapter).get().getWebGLRenderingContext()?1:2,this.getExtensions(),this.validateContext(e),this._renderer.runners.contextChange.emit(e);let t=this._renderer.view.canvas;t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}createContext(e,t){let r;let n=this.canvas;if(2===e&&(r=n.getContext("webgl2",t)),!r&&!(r=n.getContext("webgl",t)))throw Error("This browser does not support WebGL. Try using the canvas renderer");this.gl=r,this.initFromContext(this.gl)}getExtensions(){let{gl:e}=this,t={anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc"),rgtc:e.getExtension("EXT_texture_compression_rgtc"),loseContext:e.getExtension("WEBGL_lose_context")};if(1===this.webGLVersion)this.extensions={...t,drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear"),vertexAttribDivisorANGLE:e.getExtension("ANGLE_instanced_arrays"),srgb:e.getExtension("EXT_sRGB")};else{this.extensions={...t,colorBufferFloat:e.getExtension("EXT_color_buffer_float")};let r=e.getExtension("WEBGL_provoking_vertex");r&&r.provokingVertexWEBGL(r.FIRST_VERTEX_CONVENTION_WEBGL)}}handleContextLost(e){e.preventDefault(),this._contextLossForced&&(this._contextLossForced=!1,setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext?.restoreContext()},0))}handleContextRestored(){this._renderer.runners.contextChange.emit(this.gl)}destroy(){let e=this._renderer.view.canvas;this._renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext?.loseContext()}forceContextLoss(){this.extensions.loseContext?.loseContext(),this._contextLossForced=!0}validateContext(e){let t=e.getContextAttributes();t&&!t.stencil&&(0,a.warn)("Provided WebGL context does not have a stencil buffer, masks may not render correctly");let r=this.supports,n=2===this.webGLVersion,i=this.extensions;r.uint32Indices=n||!!i.uint32ElementIndex,r.uniformBufferObject=n,r.vertexArrayObject=n||!!i.vertexArrayObject,r.srgbTextures=n||!!i.srgb,r.nonPowOf2wrapping=n,r.nonPowOf2mipmaps=n,r.msaa=n,r.uint32Indices||(0,a.warn)("Provided WebGL context does not support 32 index buffer, large scenes may not render correctly")}};o.extension={type:[s.ExtensionType.WebGLSystem],name:"context"},o.defaultOptions={context:null,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:void 0,preferWebGLVersion:2,multiView:!1};let l=o}),r("8Hp4H",function(r,n){e(r.exports,"GlGeometrySystem",function(){return u});var i=t("3A7or"),s=t("aBCYy"),a=t("5KxRG"),o=t("fwKGS");let l={"point-list":0,"line-list":1,"line-strip":3,"triangle-list":4,"triangle-strip":5};class u{constructor(e){this._geometryVaoHash=Object.create(null),this._renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this._renderer.renderableGC.addManagedHash(this,"_geometryVaoHash")}contextChange(){let e=this.gl=this._renderer.gl;if(!this._renderer.context.supports.vertexArrayObject)throw Error("[PixiJS] Vertex Array Objects are not supported on this device");let t=this._renderer.context.extensions.vertexArrayObject;t&&(e.createVertexArray=()=>t.createVertexArrayOES(),e.bindVertexArray=e=>t.bindVertexArrayOES(e),e.deleteVertexArray=e=>t.deleteVertexArrayOES(e));let r=this._renderer.context.extensions.vertexAttribDivisorANGLE;r&&(e.drawArraysInstanced=(e,t,n,i)=>{r.drawArraysInstancedANGLE(e,t,n,i)},e.drawElementsInstanced=(e,t,n,i,s)=>{r.drawElementsInstancedANGLE(e,t,n,i,s)},e.vertexAttribDivisor=(e,t)=>r.vertexAttribDivisorANGLE(e,t)),this._activeGeometry=null,this._activeVao=null,this._geometryVaoHash=Object.create(null)}bind(e,t){let r=this.gl;this._activeGeometry=e;let n=this.getVao(e,t);this._activeVao!==n&&(this._activeVao=n,r.bindVertexArray(n)),this.updateBuffers()}resetState(){this.unbind()}updateBuffers(){let e=this._activeGeometry,t=this._renderer.buffer;for(let r=0;r<e.buffers.length;r++){let n=e.buffers[r];t.updateBuffer(n)}}checkCompatibility(e,t){let r=e.attributes,n=t._attributeData;for(let e in n)if(!r[e])throw Error(`shader and geometry incompatible, geometry missing the "${e}" attribute`)}getSignature(e,t){let r=e.attributes,n=t._attributeData,i=["g",e.uid];for(let e in r)n[e]&&i.push(e,n[e].location);return i.join("-")}getVao(e,t){return this._geometryVaoHash[e.uid]?.[t._key]||this.initGeometryVao(e,t)}initGeometryVao(e,t,r=!0){let n=this._renderer.gl,i=this._renderer.buffer;this._renderer.shader._getProgramData(t),this.checkCompatibility(e,t);let s=this.getSignature(e,t);this._geometryVaoHash[e.uid]||(this._geometryVaoHash[e.uid]=Object.create(null),e.on("destroy",this.onGeometryDestroy,this));let o=this._geometryVaoHash[e.uid],l=o[s];if(l)return o[t._key]=l,l;(0,a.ensureAttributes)(e,t._attributeData);let u=e.buffers;l=n.createVertexArray(),n.bindVertexArray(l);for(let e=0;e<u.length;e++){let t=u[e];i.bind(t)}return this.activateVao(e,t),o[t._key]=l,o[s]=l,n.bindVertexArray(null),l}onGeometryDestroy(e,t){let r=this._geometryVaoHash[e.uid],n=this.gl;if(r){if(t)for(let e in r)this._activeVao!==r[e]&&this.unbind(),n.deleteVertexArray(r[e]);this._geometryVaoHash[e.uid]=null}}destroyAll(e=!1){let t=this.gl;for(let r in this._geometryVaoHash){if(e)for(let e in this._geometryVaoHash[r]){let n=this._geometryVaoHash[r];this._activeVao!==n&&this.unbind(),t.deleteVertexArray(n[e])}this._geometryVaoHash[r]=null}}activateVao(e,t){let r=this._renderer.gl,n=this._renderer.buffer,i=e.attributes;e.indexBuffer&&n.bind(e.indexBuffer);let a=null;for(let e in i){let l=i[e],u=l.buffer,c=n.getGlBuffer(u),_=t._attributeData[e];if(_){a!==c&&(n.bind(u),a=c);let e=_.location;r.enableVertexAttribArray(e);let t=(0,s.getAttributeInfoFromFormat)(l.format),i=(0,o.getGlTypeFromFormat)(l.format);if(_.format?.substring(1,4)==="int"?r.vertexAttribIPointer(e,t.size,i,l.stride,l.offset):r.vertexAttribPointer(e,t.size,i,t.normalised,l.stride,l.offset),l.instance){if(this.hasInstance){let t=l.divisor??1;r.vertexAttribDivisor(e,t)}else throw Error("geometry error, GPU Instancing is not supported on this device")}}}}draw(e,t,r,n){let{gl:i}=this._renderer,s=this._activeGeometry,a=l[e||s.topology];if(n??(n=s.instanceCount),s.indexBuffer){let e=s.indexBuffer.data.BYTES_PER_ELEMENT,o=2===e?i.UNSIGNED_SHORT:i.UNSIGNED_INT;n>1?i.drawElementsInstanced(a,t||s.indexBuffer.data.length,o,(r||0)*e,n):i.drawElements(a,t||s.indexBuffer.data.length,o,(r||0)*e)}else n>1?i.drawArraysInstanced(a,r||0,t||s.getSize(),n):i.drawArrays(a,r||0,t||s.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this._renderer=null,this.gl=null,this._activeVao=null,this._activeGeometry=null}}u.extension={type:[i.ExtensionType.WebGLSystem],name:"geometry"}}),r("fwKGS",function(r,n){e(r.exports,"getGlTypeFromFormat",function(){return a});var i=t("9ZfF2");let s={uint8x2:i.GL_TYPES.UNSIGNED_BYTE,uint8x4:i.GL_TYPES.UNSIGNED_BYTE,sint8x2:i.GL_TYPES.BYTE,sint8x4:i.GL_TYPES.BYTE,unorm8x2:i.GL_TYPES.UNSIGNED_BYTE,unorm8x4:i.GL_TYPES.UNSIGNED_BYTE,snorm8x2:i.GL_TYPES.BYTE,snorm8x4:i.GL_TYPES.BYTE,uint16x2:i.GL_TYPES.UNSIGNED_SHORT,uint16x4:i.GL_TYPES.UNSIGNED_SHORT,sint16x2:i.GL_TYPES.SHORT,sint16x4:i.GL_TYPES.SHORT,unorm16x2:i.GL_TYPES.UNSIGNED_SHORT,unorm16x4:i.GL_TYPES.UNSIGNED_SHORT,snorm16x2:i.GL_TYPES.SHORT,snorm16x4:i.GL_TYPES.SHORT,float16x2:i.GL_TYPES.HALF_FLOAT,float16x4:i.GL_TYPES.HALF_FLOAT,float32:i.GL_TYPES.FLOAT,float32x2:i.GL_TYPES.FLOAT,float32x3:i.GL_TYPES.FLOAT,float32x4:i.GL_TYPES.FLOAT,uint32:i.GL_TYPES.UNSIGNED_INT,uint32x2:i.GL_TYPES.UNSIGNED_INT,uint32x3:i.GL_TYPES.UNSIGNED_INT,uint32x4:i.GL_TYPES.UNSIGNED_INT,sint32:i.GL_TYPES.INT,sint32x2:i.GL_TYPES.INT,sint32x3:i.GL_TYPES.INT,sint32x4:i.GL_TYPES.INT};function a(e){return s[e]??s.float32}}),r("9ZfF2",function(t,r){e(t.exports,"GL_FORMATS",function(){return o}),e(t.exports,"GL_TARGETS",function(){return l}),e(t.exports,"GL_TYPES",function(){return c});var n,i,s,a,o=((n=o||{})[n.RGBA=6408]="RGBA",n[n.RGB=6407]="RGB",n[n.RG=33319]="RG",n[n.RED=6403]="RED",n[n.RGBA_INTEGER=36249]="RGBA_INTEGER",n[n.RGB_INTEGER=36248]="RGB_INTEGER",n[n.RG_INTEGER=33320]="RG_INTEGER",n[n.RED_INTEGER=36244]="RED_INTEGER",n[n.ALPHA=6406]="ALPHA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",n),l=((i=l||{})[i.TEXTURE_2D=3553]="TEXTURE_2D",i[i.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",i[i.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",i[i.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",i[i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",i[i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",i[i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",i),u=((s=u||{})[s.CLAMP=33071]="CLAMP",s[s.REPEAT=10497]="REPEAT",s[s.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",s),c=((a=c||{})[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",a[a.UNSIGNED_INT=5125]="UNSIGNED_INT",a[a.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",a[a.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",a[a.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",a[a.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",a[a.BYTE=5120]="BYTE",a[a.SHORT=5122]="SHORT",a[a.INT=5124]="INT",a[a.FLOAT=5126]="FLOAT",a[a.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",a[a.HALF_FLOAT=36193]="HALF_FLOAT",a)}),r("gI9MA",function(r,n){e(r.exports,"GlBackBufferSystem",function(){return d});var i=t("3A7or"),s=t("8wKXC"),a=t("id9wm"),o=t("6ss2x"),l=t("cG8uY"),u=t("fW1pC"),c=t("2ayin"),_=t("inAWw");let h=new a.Geometry({attributes:{aPosition:[-1,-1,3,-1,-1,3]}}),f=class e{constructor(e){this.useBackBuffer=!1,this._useBackBufferThisRender=!1,this._renderer=e}init(t={}){let{useBackBuffer:r,antialias:n}={...e.defaultOptions,...t};this.useBackBuffer=r,this._antialias=n,this._renderer.context.supports.msaa||((0,s.warn)("antialiasing, is not supported on when using the back buffer"),this._antialias=!1),this._state=(0,l.State).for2d();let i=new _.GlProgram({vertex:`
                attribute vec2 aPosition;
                out vec2 vUv;

                void main() {
                    gl_Position = vec4(aPosition, 0.0, 1.0);

                    vUv = (aPosition + 1.0) / 2.0;

                    // flip dem UVs
                    vUv.y = 1.0 - vUv.y;
                }`,fragment:`
                in vec2 vUv;
                out vec4 finalColor;

                uniform sampler2D uTexture;

                void main() {
                    finalColor = texture(uTexture, vUv);
                }`,name:"big-triangle"});this._bigTriangleShader=new o.Shader({glProgram:i,resources:{uTexture:c.Texture.WHITE.source}})}renderStart(e){let t=this._renderer.renderTarget.getRenderTarget(e.target);if(this._useBackBufferThisRender=this.useBackBuffer&&!!t.isRoot,this._useBackBufferThisRender){let t=this._renderer.renderTarget.getRenderTarget(e.target);this._targetTexture=t.colorTexture,e.target=this._getBackBufferTexture(t.colorTexture)}}renderEnd(){this._presentBackBuffer()}_presentBackBuffer(){let e=this._renderer;e.renderTarget.finishRenderPass(),this._useBackBufferThisRender&&(e.renderTarget.bind(this._targetTexture,!1),this._bigTriangleShader.resources.uTexture=this._backBufferTexture.source,e.encoder.draw({geometry:h,shader:this._bigTriangleShader,state:this._state}))}_getBackBufferTexture(e){return this._backBufferTexture=this._backBufferTexture||new c.Texture({source:new u.TextureSource({width:e.width,height:e.height,resolution:e._resolution,antialias:this._antialias})}),this._backBufferTexture.source.resize(e.width,e.height,e._resolution),this._backBufferTexture}destroy(){this._backBufferTexture&&(this._backBufferTexture.destroy(),this._backBufferTexture=null)}};f.extension={type:[i.ExtensionType.WebGLSystem],name:"backBuffer",priority:1},f.defaultOptions={useBackBuffer:!1};let d=f}),r("4BaIT",function(r,n){e(r.exports,"GlColorMaskSystem",function(){return s});var i=t("3A7or");class s{constructor(e){this._colorMaskCache=15,this._renderer=e}setMask(e){this._colorMaskCache!==e&&(this._colorMaskCache=e,this._renderer.gl.colorMask(!!(8&e),!!(4&e),!!(2&e),!!(1&e)))}}s.extension={type:[i.ExtensionType.WebGLSystem],name:"colorMask"}}),r("5KSBR",function(r,n){e(r.exports,"GlEncoderSystem",function(){return s});var i=t("3A7or");class s{constructor(e){this.commandFinished=Promise.resolve(),this._renderer=e}setGeometry(e,t){this._renderer.geometry.bind(e,t.glProgram)}finishRenderPass(){}draw(e){let t=this._renderer,{geometry:r,shader:n,state:i,skipSync:s,topology:a,size:o,start:l,instanceCount:u}=e;t.shader.bind(n,s),t.geometry.bind(r,t.shader._activeProgram),i&&t.state.set(i),t.geometry.draw(a,o,l,u??r.instanceCount)}destroy(){this._renderer=null}}s.extension={type:[i.ExtensionType.WebGLSystem],name:"encoder"}}),r("1ByBh",function(r,n){e(r.exports,"GlStencilSystem",function(){return o});var i=t("3A7or"),s=t("iBSbi"),a=t("8tcyC");class o{constructor(e){this._stencilCache={enabled:!1,stencilReference:0,stencilMode:a.STENCIL_MODES.NONE},this._renderTargetStencilState=Object.create(null),e.renderTarget.onRenderTargetChange.add(this)}contextChange(e){this._gl=e,this._comparisonFuncMapping={always:e.ALWAYS,never:e.NEVER,equal:e.EQUAL,"not-equal":e.NOTEQUAL,less:e.LESS,"less-equal":e.LEQUAL,greater:e.GREATER,"greater-equal":e.GEQUAL},this._stencilOpsMapping={keep:e.KEEP,zero:e.ZERO,replace:e.REPLACE,invert:e.INVERT,"increment-clamp":e.INCR,"decrement-clamp":e.DECR,"increment-wrap":e.INCR_WRAP,"decrement-wrap":e.DECR_WRAP},this._stencilCache.enabled=!1,this._stencilCache.stencilMode=a.STENCIL_MODES.NONE,this._stencilCache.stencilReference=0}onRenderTargetChange(e){if(this._activeRenderTarget===e)return;this._activeRenderTarget=e;let t=this._renderTargetStencilState[e.uid];t||(t=this._renderTargetStencilState[e.uid]={stencilMode:a.STENCIL_MODES.DISABLED,stencilReference:0}),this.setStencilMode(t.stencilMode,t.stencilReference)}setStencilMode(e,t){let r=this._renderTargetStencilState[this._activeRenderTarget.uid],n=this._gl,i=s.GpuStencilModesToPixi[e],o=this._stencilCache;if(r.stencilMode=e,r.stencilReference=t,e===a.STENCIL_MODES.DISABLED){this._stencilCache.enabled&&(this._stencilCache.enabled=!1,n.disable(n.STENCIL_TEST));return}this._stencilCache.enabled||(this._stencilCache.enabled=!0,n.enable(n.STENCIL_TEST)),(e!==o.stencilMode||o.stencilReference!==t)&&(o.stencilMode=e,o.stencilReference=t,n.stencilFunc(this._comparisonFuncMapping[i.stencilBack.compare],t,255),n.stencilOp(n.KEEP,n.KEEP,this._stencilOpsMapping[i.stencilBack.passOp]))}}o.extension={type:[i.ExtensionType.WebGLSystem],name:"stencil"}}),r("bIMwU",function(r,n){e(r.exports,"GlUboSystem",function(){return l});var i=t("3A7or"),s=t("YdlqW"),a=t("l2odF"),o=t("1mDHx");class l extends s.UboSystem{constructor(){super({createUboElements:a.createUboElementsSTD40,generateUboSync:o.createUboSyncFunctionSTD40})}}l.extension={type:[i.ExtensionType.WebGLSystem],name:"ubo"}}),r("l2odF",function(t,r){e(t.exports,"WGSL_TO_STD40_SIZE",function(){return n}),e(t.exports,"createUboElementsSTD40",function(){return i});let n={f32:4,i32:4,"vec2<f32>":8,"vec3<f32>":12,"vec4<f32>":16,"vec2<i32>":8,"vec3<i32>":12,"vec4<i32>":16,"mat2x2<f32>":32,"mat3x3<f32>":48,"mat4x4<f32>":64};function i(e){let t=e.map(e=>({data:e,offset:0,size:0})),r=0,i=0;for(let e=0;e<t.length;e++){let s=t[e];if(!(r=n[s.data.type]))throw Error(`Unknown type ${s.data.type}`);s.data.size>1&&(r=Math.max(r,16)*s.data.size);let a=12===r?16:r;s.size=r;let o=i%16;o>0&&16-o<a?i+=(16-o)%16:i+=(r-o%r)%r,s.offset=i,i+=r}return{uboElements:t,size:i=16*Math.ceil(i/16)}}}),r("1mDHx",function(r,n){e(r.exports,"createUboSyncFunctionSTD40",function(){return o});var i=t("9P6Iw"),s=t("82L2c"),a=t("dr44J");function o(e){return(0,i.createUboSyncFunction)(e,"uboStd40",a.generateArraySyncSTD40,s.uboSyncFunctionsSTD40)}}),r("dr44J",function(r,n){e(r.exports,"generateArraySyncSTD40",function(){return s});var i=t("l2odF");function s(e,t){let r=Math.max(i.WGSL_TO_STD40_SIZE[e.data.type]/16,1),n=e.data.value.length/e.data.size,s=(4-n%4)%4,a=e.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
        v = uv.${e.data.name};
        offset += ${t};

        arrayOffset = offset;

        t = 0;

        for(var i=0; i < ${e.data.size*r}; i++)
        {
            for(var j = 0; j < ${n}; j++)
            {
                ${a}[arrayOffset++] = v[t++];
            }
            ${0!==s?`arrayOffset += ${s};`:""}
        }
    `}}),r("1pSfy",function(r,n){e(r.exports,"GlRenderTargetSystem",function(){return o});var i=t("3A7or"),s=t("3RVKw"),a=t("cFWq0");class o extends s.RenderTargetSystem{constructor(e){super(e),this.adaptor=new a.GlRenderTargetAdaptor,this.adaptor.init(e,this)}}o.extension={type:[i.ExtensionType.WebGLSystem],name:"renderTarget"}}),r("cFWq0",function(r,n){e(r.exports,"GlRenderTargetAdaptor",function(){return u});var i=t("lWFlQ"),s=t("8wKXC"),a=t("lnXKS"),o=t("QLZpr"),l=t("liQUx");class u{constructor(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new i.Rectangle}init(e,t){this._renderer=e,this._renderTargetSystem=t,e.runners.contextChange.add(this)}contextChange(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new i.Rectangle}copyToTexture(e,t,r,n,i){let s=this._renderTargetSystem,a=this._renderer,o=s.getGpuRenderTarget(e),l=a.gl;return this.finishRenderPass(e),l.bindFramebuffer(l.FRAMEBUFFER,o.resolveTargetFramebuffer),a.texture.bind(t,0),l.copyTexSubImage2D(l.TEXTURE_2D,0,i.x,i.y,r.x,r.y,n.width,n.height),t}startRenderPass(e,t=!0,r,n){let i=this._renderTargetSystem,s=e.colorTexture,a=i.getGpuRenderTarget(e),o=n.y;e.isRoot&&(o=s.pixelHeight-n.height),e.colorTextures.forEach(e=>{this._renderer.texture.unbind(e)});let l=this._renderer.gl;l.bindFramebuffer(l.FRAMEBUFFER,a.framebuffer);let u=this._viewPortCache;(u.x!==n.x||u.y!==o||u.width!==n.width||u.height!==n.height)&&(u.x=n.x,u.y=o,u.width=n.width,u.height=n.height,l.viewport(n.x,o,n.width,n.height)),!a.depthStencilRenderBuffer&&(e.stencil||e.depth)&&this._initStencil(a),this.clear(e,t,r)}finishRenderPass(e){let t=this._renderTargetSystem.getGpuRenderTarget(e);if(!t.msaa)return;let r=this._renderer.gl;r.bindFramebuffer(r.FRAMEBUFFER,t.resolveTargetFramebuffer),r.bindFramebuffer(r.READ_FRAMEBUFFER,t.framebuffer),r.blitFramebuffer(0,0,t.width,t.height,0,0,t.width,t.height,r.COLOR_BUFFER_BIT,r.NEAREST),r.bindFramebuffer(r.FRAMEBUFFER,t.framebuffer)}initGpuRenderTarget(e){let t=this._renderer,r=t.gl,n=new l.GlRenderTarget;return e.colorTexture.resource===t.canvas?(this._renderer.context.ensureCanvasSize(e.colorTexture.resource),n.framebuffer=null):(this._initColor(e,n),r.bindFramebuffer(r.FRAMEBUFFER,null)),n}destroyGpuRenderTarget(e){let t=this._renderer.gl;e.framebuffer&&(t.deleteFramebuffer(e.framebuffer),e.framebuffer=null),e.resolveTargetFramebuffer&&(t.deleteFramebuffer(e.resolveTargetFramebuffer),e.resolveTargetFramebuffer=null),e.depthStencilRenderBuffer&&(t.deleteRenderbuffer(e.depthStencilRenderBuffer),e.depthStencilRenderBuffer=null),e.msaaRenderBuffer.forEach(e=>{t.deleteRenderbuffer(e)}),e.msaaRenderBuffer=null}clear(e,t,r){if(!t)return;let n=this._renderTargetSystem;"boolean"==typeof t&&(t=t?o.CLEAR.ALL:o.CLEAR.NONE);let i=this._renderer.gl;if(t&o.CLEAR.COLOR){r??(r=n.defaultClearColor);let e=this._clearColorCache,t=r;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3])&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],i.clearColor(t[0],t[1],t[2],t[3]))}i.clear(t)}resizeGpuRenderTarget(e){if(e.isRoot)return;let t=this._renderTargetSystem.getGpuRenderTarget(e);this._resizeColor(e,t),(e.stencil||e.depth)&&this._resizeStencil(t)}_initColor(e,t){let r=this._renderer,n=r.gl,i=n.createFramebuffer();if(t.resolveTargetFramebuffer=i,n.bindFramebuffer(n.FRAMEBUFFER,i),t.width=e.colorTexture.source.pixelWidth,t.height=e.colorTexture.source.pixelHeight,e.colorTextures.forEach((e,i)=>{let a=e.source;a.antialias&&(r.context.supports.msaa?t.msaa=!0:(0,s.warn)("[RenderTexture] Antialiasing on textures is not supported in WebGL1")),r.texture.bindSource(a,0);let o=r.texture.getGlSource(a).texture;n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+i,3553,o,0)}),t.msaa){let r=n.createFramebuffer();t.framebuffer=r,n.bindFramebuffer(n.FRAMEBUFFER,r),e.colorTextures.forEach((e,r)=>{let i=n.createRenderbuffer();t.msaaRenderBuffer[r]=i})}else t.framebuffer=i;this._resizeColor(e,t)}_resizeColor(e,t){let r=e.colorTexture.source;if(t.width=r.pixelWidth,t.height=r.pixelHeight,e.colorTextures.forEach((e,t)=>{0!==t&&e.source.resize(r.width,r.height,r._resolution)}),t.msaa){let r=this._renderer,n=r.gl,i=t.framebuffer;n.bindFramebuffer(n.FRAMEBUFFER,i),e.colorTextures.forEach((e,i)=>{let s=e.source;r.texture.bindSource(s,0);let a=r.texture.getGlSource(s).internalFormat,o=t.msaaRenderBuffer[i];n.bindRenderbuffer(n.RENDERBUFFER,o),n.renderbufferStorageMultisample(n.RENDERBUFFER,4,a,s.pixelWidth,s.pixelHeight),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+i,n.RENDERBUFFER,o)})}}_initStencil(e){if(null===e.framebuffer)return;let t=this._renderer.gl,r=t.createRenderbuffer();e.depthStencilRenderBuffer=r,t.bindRenderbuffer(t.RENDERBUFFER,r),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,r),this._resizeStencil(e)}_resizeStencil(e){let t=this._renderer.gl;t.bindRenderbuffer(t.RENDERBUFFER,e.depthStencilRenderBuffer),e.msaa?t.renderbufferStorageMultisample(t.RENDERBUFFER,4,t.DEPTH24_STENCIL8,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,2===this._renderer.context.webGLVersion?t.DEPTH24_STENCIL8:t.DEPTH_STENCIL,e.width,e.height)}prerender(e){let t=e.colorTexture.resource;this._renderer.context.multiView&&(0,a.CanvasSource).test(t)&&this._renderer.context.ensureCanvasSize(t)}postrender(e){if(this._renderer.context.multiView&&(0,a.CanvasSource).test(e.colorTexture.resource)){let t=this._renderer.context.canvas,r=e.colorTexture;r.context2D.drawImage(t,0,r.pixelHeight-t.height)}}}}),r("liQUx",function(t,r){e(t.exports,"GlRenderTarget",function(){return n});class n{constructor(){this.width=-1,this.height=-1,this.msaa=!1,this.msaaRenderBuffer=[]}}}),r("gfZcM",function(r,n){e(r.exports,"GlShaderSystem",function(){return u});var i=t("3A7or"),s=t("cLTfn"),a=t("fX4vg"),o=t("3VfAp");let l={textureCount:0,blockIndex:0};class u{constructor(e){this._activeProgram=null,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_programDataHash")}contextChange(e){this._gl=e,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._activeProgram=null,this.maxTextures=(0,s.getMaxTexturesPerBatch)()}bind(e,t){if(this._setProgram(e.glProgram),t)return;l.textureCount=0,l.blockIndex=0;let r=this._shaderSyncFunctions[e.glProgram._key];r||(r=this._shaderSyncFunctions[e.glProgram._key]=this._generateShaderSync(e,this)),this._renderer.buffer.nextBindBase(!!e.glProgram.transformFeedbackVaryings),r(this._renderer,e,l)}updateUniformGroup(e){this._renderer.uniformGroup.updateUniformGroup(e,this._activeProgram,l)}bindUniformBlock(e,t,r=0){let n=this._renderer.buffer,i=this._getProgramData(this._activeProgram),s=e._bufferResource;s||this._renderer.ubo.updateUniformGroup(e);let a=e.buffer,o=n.updateBuffer(a),l=n.freeLocationForBufferBase(o);if(s){let{offset:t,size:r}=e;0===t&&r===a.data.byteLength?n.bindBufferBase(o,l):n.bindBufferRange(o,l,t)}else n.getLastBindBaseLocation(o)!==l&&n.bindBufferBase(o,l);let u=this._activeProgram._uniformBlockData[t].index;i.uniformBlockBindings[r]!==l&&(i.uniformBlockBindings[r]=l,this._renderer.gl.uniformBlockBinding(i.program,u,l))}_setProgram(e){if(this._activeProgram===e)return;this._activeProgram=e;let t=this._getProgramData(e);this._gl.useProgram(t.program)}_getProgramData(e){return this._programDataHash[e._key]||this._createProgramData(e)}_createProgramData(e){let t=e._key;return this._programDataHash[t]=(0,o.generateProgram)(this._gl,e),this._programDataHash[t]}destroy(){for(let e of Object.keys(this._programDataHash))this._programDataHash[e].destroy(),this._programDataHash[e]=null;this._programDataHash=null}_generateShaderSync(e,t){return(0,a.generateShaderSyncCode)(e,t)}resetState(){this._activeProgram=null}}u.extension={type:[i.ExtensionType.WebGLSystem],name:"shader"}}),r("fX4vg",function(r,n){e(r.exports,"generateShaderSyncCode",function(){return o});var i=t("6wnQF"),s=t("iOPov"),a=t("fW1pC");function o(e,t){let r=[],n=[`
        var g = s.groups;
        var sS = r.shader;
        var p = s.glProgram;
        var ugS = r.uniformGroup;
        var resources;
    `],o=!1,l=0,u=t._getProgramData(e.glProgram);for(let c in e.groups){let _=e.groups[c];for(let h in r.push(`
            resources = g[${c}].resources;
        `),_.resources){let f=_.resources[h];if(f instanceof s.UniformGroup){if(f.ubo){let t=e._uniformBindMap[c][Number(h)];r.push(`
                        sS.bindUniformBlock(
                            resources[${h}],
                            '${t}',
                            ${e.glProgram._uniformBlockData[t].index}
                        );
                    `)}else r.push(`
                        ugS.updateUniformGroup(resources[${h}], p, sD);
                    `)}else if(f instanceof i.BufferResource){let t=e._uniformBindMap[c][Number(h)];r.push(`
                    sS.bindUniformBlock(
                        resources[${h}],
                        '${t}',
                        ${e.glProgram._uniformBlockData[t].index}
                    );
                `)}else if(f instanceof a.TextureSource){let i=e._uniformBindMap[c][h],s=u.uniformData[i];s&&(o||(o=!0,n.push(`
                        var tS = r.texture;
                        `)),t._gl.uniform1i(s.location,l),r.push(`
                        tS.bind(resources[${h}], ${l});
                    `),l++)}}}return Function("r","s","sD",[...n,...r].join("\n"))}}),r("3VfAp",function(r,n){e(r.exports,"generateProgram",function(){return h});var i=t("8wKXC"),s=t("9cADq"),a=t("3uxa2"),o=t("5snJ3"),l=t("3S5rQ"),u=t("lQkow"),c=t("g21M0"),_=t("bUPYK");function h(e,t){let r=(0,a.compileShader)(e,e.VERTEX_SHADER,t.vertex),n=(0,a.compileShader)(e,e.FRAGMENT_SHADER,t.fragment),h=e.createProgram();e.attachShader(h,r),e.attachShader(h,n);let f=t.transformFeedbackVaryings;f&&("function"!=typeof e.transformFeedbackVaryings?(0,i.warn)("TransformFeedback is not supported but TransformFeedbackVaryings are given."):e.transformFeedbackVaryings(h,f.names,"separate"===f.bufferMode?e.SEPARATE_ATTRIBS:e.INTERLEAVED_ATTRIBS)),e.linkProgram(h),e.getProgramParameter(h,e.LINK_STATUS)||(0,_.logProgramError)(e,h,r,n),t._attributeData=(0,l.extractAttributesFromGlProgram)(h,e,!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertex)),t._uniformData=(0,c.getUniformData)(h,e),t._uniformBlockData=(0,u.getUboData)(h,e),e.deleteShader(r),e.deleteShader(n);let d={};for(let r in t._uniformData){let n=t._uniformData[r];d[r]={location:e.getUniformLocation(h,r),value:(0,o.defaultValue)(n.type,n.size)}}return new s.GlProgramData(h,d)}}),r("9cADq",function(t,r){e(t.exports,"GlProgramData",function(){return n});class n{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBlockBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBlockBindings=null,this.program=null}}}),r("3uxa2",function(t,r){e(t.exports,"compileShader",function(){return n});function n(e,t,r){let n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),n}}),r("5snJ3",function(t,r){function n(e){let t=Array(e);for(let e=0;e<t.length;e++)t[e]=!1;return t}function i(e,t){switch(e){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return n(2*t);case"bvec3":return n(3*t);case"bvec4":return n(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}e(t.exports,"defaultValue",function(){return i})}),r("3S5rQ",function(r,n){e(r.exports,"extractAttributesFromGlProgram",function(){return a});var i=t("aBCYy"),s=t("8htQj");function a(e,t,r=!1){let n={},o=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<o;r++){let a=t.getActiveAttrib(e,r);if(a.name.startsWith("gl_"))continue;let o=(0,s.mapGlToVertexFormat)(t,a.type);n[a.name]={location:0,format:o,stride:(0,i.getAttributeInfoFromFormat)(o).stride,offset:0,instance:!1,start:0}}let l=Object.keys(n);if(r){l.sort((e,t)=>e>t?1:-1);for(let r=0;r<l.length;r++)n[l[r]].location=r,t.bindAttribLocation(e,r,l[r]);t.linkProgram(e)}else for(let r=0;r<l.length;r++)n[l[r]].location=t.getAttribLocation(e,l[r]);return n}}),r("8htQj",function(t,r){e(t.exports,"mapType",function(){return a}),e(t.exports,"mapGlToVertexFormat",function(){return o});let n=null,i={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"},s={float:"float32",vec2:"float32x2",vec3:"float32x3",vec4:"float32x4",int:"sint32",ivec2:"sint32x2",ivec3:"sint32x3",ivec4:"sint32x4",uint:"uint32",uvec2:"uint32x2",uvec3:"uint32x3",uvec4:"uint32x4",bool:"uint32",bvec2:"uint32x2",bvec3:"uint32x3",bvec4:"uint32x4"};function a(e,t){if(!n){let t=Object.keys(i);n={};for(let r=0;r<t.length;++r){let s=t[r];n[e[s]]=i[s]}}return n[t]}function o(e,t){return s[a(e,t)]||"float32"}}),r("lQkow",function(t,r){e(t.exports,"getUboData",function(){return n});function n(e,t){if(!t.ACTIVE_UNIFORM_BLOCKS)return{};let r={},n=t.getProgramParameter(e,t.ACTIVE_UNIFORM_BLOCKS);for(let i=0;i<n;i++){let n=t.getActiveUniformBlockName(e,i),s=t.getUniformBlockIndex(e,n),a=t.getActiveUniformBlockParameter(e,i,t.UNIFORM_BLOCK_DATA_SIZE);r[n]={name:n,index:s,size:a}}return r}}),r("g21M0",function(r,n){e(r.exports,"getUniformData",function(){return a});var i=t("5snJ3"),s=t("8htQj");function a(e,t){let r={},n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let a=0;a<n;a++){let n=t.getActiveUniform(e,a),o=n.name.replace(/\[.*?\]$/,""),l=!!n.name.match(/\[.*?\]$/),u=(0,s.mapType)(t,n.type);r[o]={name:o,index:a,type:u,size:n.size,isArray:l,value:(0,i.defaultValue)(u,n.size)}}return r}}),r("bUPYK",function(t,r){function n(e,t){let r=e.getShaderSource(t).split("\n").map((e,t)=>`${t}: ${e}`),n=e.getShaderInfoLog(t),i=n.split("\n"),s={},a=i.map(e=>parseFloat(e.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(e=>!!e&&!s[e]&&(s[e]=!0,!0)),o=[""];a.forEach(e=>{r[e-1]=`%c${r[e-1]}%c`,o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});let l=r.join("\n");o[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...o),console.groupEnd()}function i(e,t,r,i){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(r,e.COMPILE_STATUS)||n(e,r),e.getShaderParameter(i,e.COMPILE_STATUS)||n(e,i),console.error("PixiJS Error: Could not initialize shader."),""!==e.getProgramInfoLog(t)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}e(t.exports,"logProgramError",function(){return i})}),r("lgMFf",function(r,n){e(r.exports,"GlUniformGroupSystem",function(){return a});var i=t("3A7or"),s=t("1gu7N");class a{constructor(e){this._cache={},this._uniformGroupSyncHash={},this._renderer=e,this.gl=null,this._cache={}}contextChange(e){this.gl=e}updateUniformGroup(e,t,r){let n=this._renderer.shader._getProgramData(t);e.isStatic&&e._dirtyId===n.uniformDirtyGroups[e.uid]||(n.uniformDirtyGroups[e.uid]=e._dirtyId,this._getUniformSyncFunction(e,t)(n.uniformData,e.uniforms,this._renderer,r))}_getUniformSyncFunction(e,t){return this._uniformGroupSyncHash[e._signature]?.[t._key]||this._createUniformSyncFunction(e,t)}_createUniformSyncFunction(e,t){let r=this._uniformGroupSyncHash[e._signature]||(this._uniformGroupSyncHash[e._signature]={}),n=this._getSignature(e,t._uniformData,"u");return this._cache[n]||(this._cache[n]=this._generateUniformsSync(e,t._uniformData)),r[t._key]=this._cache[n],r[t._key]}_generateUniformsSync(e,t){return(0,s.generateUniformsSync)(e,t)}_getSignature(e,t,r){let n=e.uniforms,i=[`${r}-`];for(let e in n)i.push(e),t[e]&&i.push(t[e].type);return i.join("-")}destroy(){this._renderer=null,this._cache=null}}a.extension={type:[i.ExtensionType.WebGLSystem],name:"uniformGroup"}}),r("1gu7N",function(r,n){e(r.exports,"generateUniformsSync",function(){return l});var i=t("6wnQF"),s=t("iOPov"),a=t("3QRnJ"),o=t("dPtUW");function l(e,t){let r=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
        var name = null;
    `];for(let n in e.uniforms){if(!t[n]){e.uniforms[n]instanceof s.UniformGroup?e.uniforms[n].ubo?r.push(`
                        renderer.shader.bindUniformBlock(uv.${n}, "${n}");
                    `):r.push(`
                        renderer.shader.updateUniformGroup(uv.${n});
                    `):e.uniforms[n]instanceof i.BufferResource&&r.push(`
                        renderer.shader.bindBufferResource(uv.${n}, "${n}");
                    `);continue}let l=e.uniformStructures[n],u=!1;for(let e=0;e<a.uniformParsers.length;e++){let t=a.uniformParsers[e];if(l.type===t.type&&t.test(l)){r.push(`name = "${n}";`,a.uniformParsers[e].uniform),u=!0;break}}if(!u){let e=(1===l.size?o.UNIFORM_TO_SINGLE_SETTERS:o.UNIFORM_TO_ARRAY_SETTERS)[l.type].replace("location",`ud["${n}"].location`);r.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${e};`)}}return Function("ud","uv","renderer","syncData",r.join("\n"))}}),r("dPtUW",function(t,r){e(t.exports,"UNIFORM_TO_SINGLE_SETTERS",function(){return n}),e(t.exports,"UNIFORM_TO_ARRAY_SETTERS",function(){return i});let n={f32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1f(location, v);
        }`,"vec2<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2f(location, v[0], v[1]);
        }`,"vec3<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3f(location, v[0], v[1], v[2]);
        }`,"vec4<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4f(location, v[0], v[1], v[2], v[3]);
        }`,i32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,u32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1ui(location, v);
        }`,"vec2<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2ui(location, v[0], v[1]);
        }`,"vec3<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3ui(location, v[0], v[1], v[2]);
        }`,"vec4<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
        }`,bool:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,"mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);"},i={f32:"gl.uniform1fv(location, v);","vec2<f32>":"gl.uniform2fv(location, v);","vec3<f32>":"gl.uniform3fv(location, v);","vec4<f32>":"gl.uniform4fv(location, v);","mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);",i32:"gl.uniform1iv(location, v);","vec2<i32>":"gl.uniform2iv(location, v);","vec3<i32>":"gl.uniform3iv(location, v);","vec4<i32>":"gl.uniform4iv(location, v);",u32:"gl.uniform1iv(location, v);","vec2<u32>":"gl.uniform2iv(location, v);","vec3<u32>":"gl.uniform3iv(location, v);","vec4<u32>":"gl.uniform4iv(location, v);",bool:"gl.uniform1iv(location, v);","vec2<bool>":"gl.uniform2iv(location, v);","vec3<bool>":"gl.uniform3iv(location, v);","vec4<bool>":"gl.uniform4iv(location, v);"}}),r("edJNm",function(r,n){e(r.exports,"GlStateSystem",function(){return l});var i=t("3A7or"),s=t("cG8uY"),a=t("kdRh4");let o=class e{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode="none",this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=(0,s.State).for2d()}contextChange(e){this.gl=e,this.blendModesMap=(0,a.mapWebGLBlendModesToPixi)(e),this.resetState()}set(e){if(e||(e=this.defaultState),this.stateId!==e.data){let t=this.stateId^e.data,r=0;for(;t;)1&t&&this.map[r].call(this,!!(e.data&1<<r)),t>>=1,r++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e||(e=this.defaultState);for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(t){this._updateCheck(e._checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this._updateCheck(e._checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(this.blendModesMap[e]||(e="normal"),e===this.blendMode)return;this.blendMode=e;let t=this.blendModesMap[e],r=this.gl;2===t.length?r.blendFunc(t[0],t[1]):r.blendFuncSeparate(t[0],t[1],t[2],t[3]),6===t.length?(this._blendEq=!0,r.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}resetState(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode="",this.setBlendMode("normal")}_updateCheck(e,t){let r=this.checks.indexOf(e);t&&-1===r?this.checks.push(e):t||-1===r||this.checks.splice(r,1)}static _checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static _checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null,this.checks.length=0}};o.extension={type:[i.ExtensionType.WebGLSystem],name:"state"};let l=o}),r("kdRh4",function(r,n){e(r.exports,"mapWebGLBlendModesToPixi",function(){return s});var i=t("4k0ap");function s(e){let t={};if(t.normal=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t.add=[e.ONE,e.ONE],t.multiply=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t.screen=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t.none=[0,0],t["normal-npm"]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t["add-npm"]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t["screen-npm"]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t.erase=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],e instanceof(0,i.DOMAdapter).get().getWebGLRenderingContext()){let r=e.getExtension("EXT_blend_minmax");r&&(t.min=[e.ONE,e.ONE,e.ONE,e.ONE,r.MIN_EXT,r.MIN_EXT],t.max=[e.ONE,e.ONE,e.ONE,e.ONE,r.MAX_EXT,r.MAX_EXT])}else t.min=[e.ONE,e.ONE,e.ONE,e.ONE,e.MIN,e.MIN],t.max=[e.ONE,e.ONE,e.ONE,e.ONE,e.MAX,e.MAX];return t}}),r("2twcM",function(r,n){e(r.exports,"GlTextureSystem",function(){return m});var i=t("4k0ap"),s=t("3A7or"),a=t("2ayin"),o=t("j8gJT"),l=t("gOuYY"),u=t("2oFMb"),c=t("lX11F"),_=t("83NYD"),h=t("9iuoz"),f=t("9MYEs"),d=t("hFiih"),g=t("4UEsw");class m{constructor(e){this.managedTextures=[],this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundTextures=[],this._activeTextureLocation=-1,this._boundSamplers=Object.create(null),this._uploads={image:c.glUploadImageResource,buffer:l.glUploadBufferImageResource,video:_.glUploadVideoResource,compressed:u.glUploadCompressedTextureResource},this._premultiplyAlpha=!1,this._useSeparateSamplers=!1,this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_glTextures"),this._renderer.renderableGC.addManagedHash(this,"_glSamplers")}contextChange(e){this._gl=e,this._mapFormatToInternalFormat||(this._mapFormatToInternalFormat=(0,d.mapFormatToGlInternalFormat)(e,this._renderer.context.extensions),this._mapFormatToType=(0,g.mapFormatToGlType)(e),this._mapFormatToFormat=(0,f.mapFormatToGlFormat)(e)),this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundSamplers=Object.create(null),this._premultiplyAlpha=!1;for(let e=0;e<16;e++)this.bind(a.Texture.EMPTY,e)}initSource(e){this.bind(e)}bind(e,t=0){let r=e.source;e?(this.bindSource(r,t),this._useSeparateSamplers&&this._bindSampler(r.style,t)):(this.bindSource(null,t),this._useSeparateSamplers&&this._bindSampler(null,t))}bindSource(e,t=0){let r=this._gl;if(e._touched=this._renderer.textureGC.count,this._boundTextures[t]!==e){this._boundTextures[t]=e,this._activateLocation(t),e||(e=a.Texture.EMPTY.source);let n=this.getGlSource(e);r.bindTexture(n.target,n.texture)}}_bindSampler(e,t=0){let r=this._gl;if(!e){this._boundSamplers[t]=null,r.bindSampler(t,null);return}let n=this._getGlSampler(e);this._boundSamplers[t]!==n&&(this._boundSamplers[t]=n,r.bindSampler(t,n))}unbind(e){let t=e.source,r=this._boundTextures,n=this._gl;for(let e=0;e<r.length;e++)if(r[e]===t){this._activateLocation(e);let i=this.getGlSource(t);n.bindTexture(i.target,null),r[e]=null}}_activateLocation(e){this._activeTextureLocation!==e&&(this._activeTextureLocation=e,this._gl.activeTexture(this._gl.TEXTURE0+e))}_initSource(e){let t=this._gl,r=new o.GlTexture(t.createTexture());if(r.type=this._mapFormatToType[e.format],r.internalFormat=this._mapFormatToInternalFormat[e.format],r.format=this._mapFormatToFormat[e.format],e.autoGenerateMipmaps&&(this._renderer.context.supports.nonPowOf2mipmaps||e.isPowerOfTwo)){let t=Math.max(e.width,e.height);e.mipLevelCount=Math.floor(Math.log2(t))+1}return this._glTextures[e.uid]=r,this.managedTextures.includes(e)||(e.on("update",this.onSourceUpdate,this),e.on("resize",this.onSourceUpdate,this),e.on("styleChange",this.onStyleChange,this),e.on("destroy",this.onSourceDestroy,this),e.on("unload",this.onSourceUnload,this),e.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(e)),this.onSourceUpdate(e),this.updateStyle(e,!1),r}onStyleChange(e){this.updateStyle(e,!1)}updateStyle(e,t){let r=this._gl,n=this.getGlSource(e);r.bindTexture(r.TEXTURE_2D,n.texture),this._boundTextures[this._activeTextureLocation]=e,(0,h.applyStyleParams)(e.style,r,e.mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"texParameteri",r.TEXTURE_2D,!this._renderer.context.supports.nonPowOf2wrapping&&!e.isPowerOfTwo,t)}onSourceUnload(e){let t=this._glTextures[e.uid];t&&(this.unbind(e),this._glTextures[e.uid]=null,this._gl.deleteTexture(t.texture))}onSourceUpdate(e){let t=this._gl,r=this.getGlSource(e);t.bindTexture(t.TEXTURE_2D,r.texture),this._boundTextures[this._activeTextureLocation]=e;let n="premultiply-alpha-on-upload"===e.alphaMode;this._premultiplyAlpha!==n&&(this._premultiplyAlpha=n,t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n)),this._uploads[e.uploadMethodId]?this._uploads[e.uploadMethodId].upload(e,r,t,this._renderer.context.webGLVersion):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.pixelWidth,e.pixelHeight,0,t.RGBA,t.UNSIGNED_BYTE,null),e.autoGenerateMipmaps&&e.mipLevelCount>1&&this.onUpdateMipmaps(e,!1)}onUpdateMipmaps(e,t=!0){t&&this.bindSource(e,0);let r=this.getGlSource(e);this._gl.generateMipmap(r.target)}onSourceDestroy(e){e.off("destroy",this.onSourceDestroy,this),e.off("update",this.onSourceUpdate,this),e.off("resize",this.onSourceUpdate,this),e.off("unload",this.onSourceUnload,this),e.off("styleChange",this.onStyleChange,this),e.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(e),1),this.onSourceUnload(e)}_initSampler(e){let t=this._gl,r=this._gl.createSampler();return this._glSamplers[e._resourceId]=r,(0,h.applyStyleParams)(e,t,this._boundTextures[this._activeTextureLocation].mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"samplerParameteri",r,!1,!0),this._glSamplers[e._resourceId]}_getGlSampler(e){return this._glSamplers[e._resourceId]||this._initSampler(e)}getGlSource(e){return this._glTextures[e.uid]||this._initSource(e)}generateCanvas(e){let{pixels:t,width:r,height:n}=this.getPixels(e),s=(0,i.DOMAdapter).get().createCanvas();s.width=r,s.height=n;let a=s.getContext("2d");if(a){let e=a.createImageData(r,n);e.data.set(t),a.putImageData(e,0,0)}return s}getPixels(e){let t=e.source.resolution,r=e.frame,n=Math.max(Math.round(r.width*t),1),i=Math.max(Math.round(r.height*t),1),s=new Uint8Array(4*n*i),a=this._renderer,o=a.renderTarget.getRenderTarget(e),l=a.renderTarget.getGpuRenderTarget(o),u=a.gl;return u.bindFramebuffer(u.FRAMEBUFFER,l.resolveTargetFramebuffer),u.readPixels(Math.round(r.x*t),Math.round(r.y*t),n,i,u.RGBA,u.UNSIGNED_BYTE,s),{pixels:new Uint8ClampedArray(s.buffer),width:n,height:i}}destroy(){this.managedTextures.slice().forEach(e=>this.onSourceDestroy(e)),this.managedTextures=null,this._renderer=null}resetState(){this._activeTextureLocation=-1,this._boundTextures.fill(a.Texture.EMPTY.source),this._boundSamplers=Object.create(null)}}m.extension={type:[s.ExtensionType.WebGLSystem],name:"texture"}}),r("j8gJT",function(r,n){e(r.exports,"GlTexture",function(){return s});var i=t("9ZfF2");class s{constructor(e){this.target=i.GL_TARGETS.TEXTURE_2D,this.texture=e,this.width=-1,this.height=-1,this.type=i.GL_TYPES.UNSIGNED_BYTE,this.internalFormat=i.GL_FORMATS.RGBA,this.format=i.GL_FORMATS.RGBA,this.samplerType=0}}}),r("gOuYY",function(t,r){e(t.exports,"glUploadBufferImageResource",function(){return n});let n={id:"buffer",upload(e,t,r){t.width===e.width||t.height===e.height?r.texSubImage2D(r.TEXTURE_2D,0,0,0,e.width,e.height,t.format,t.type,e.resource):r.texImage2D(t.target,0,t.internalFormat,e.width,e.height,0,t.format,t.type,e.resource),t.width=e.width,t.height=e.height}}}),r("2oFMb",function(t,r){e(t.exports,"glUploadCompressedTextureResource",function(){return i});let n={"bc1-rgba-unorm":!0,"bc1-rgba-unorm-srgb":!0,"bc2-rgba-unorm":!0,"bc2-rgba-unorm-srgb":!0,"bc3-rgba-unorm":!0,"bc3-rgba-unorm-srgb":!0,"bc4-r-unorm":!0,"bc4-r-snorm":!0,"bc5-rg-unorm":!0,"bc5-rg-snorm":!0,"bc6h-rgb-ufloat":!0,"bc6h-rgb-float":!0,"bc7-rgba-unorm":!0,"bc7-rgba-unorm-srgb":!0,"etc2-rgb8unorm":!0,"etc2-rgb8unorm-srgb":!0,"etc2-rgb8a1unorm":!0,"etc2-rgb8a1unorm-srgb":!0,"etc2-rgba8unorm":!0,"etc2-rgba8unorm-srgb":!0,"eac-r11unorm":!0,"eac-r11snorm":!0,"eac-rg11unorm":!0,"eac-rg11snorm":!0,"astc-4x4-unorm":!0,"astc-4x4-unorm-srgb":!0,"astc-5x4-unorm":!0,"astc-5x4-unorm-srgb":!0,"astc-5x5-unorm":!0,"astc-5x5-unorm-srgb":!0,"astc-6x5-unorm":!0,"astc-6x5-unorm-srgb":!0,"astc-6x6-unorm":!0,"astc-6x6-unorm-srgb":!0,"astc-8x5-unorm":!0,"astc-8x5-unorm-srgb":!0,"astc-8x6-unorm":!0,"astc-8x6-unorm-srgb":!0,"astc-8x8-unorm":!0,"astc-8x8-unorm-srgb":!0,"astc-10x5-unorm":!0,"astc-10x5-unorm-srgb":!0,"astc-10x6-unorm":!0,"astc-10x6-unorm-srgb":!0,"astc-10x8-unorm":!0,"astc-10x8-unorm-srgb":!0,"astc-10x10-unorm":!0,"astc-10x10-unorm-srgb":!0,"astc-12x10-unorm":!0,"astc-12x10-unorm-srgb":!0,"astc-12x12-unorm":!0,"astc-12x12-unorm-srgb":!0},i={id:"compressed",upload(e,t,r){r.pixelStorei(r.UNPACK_ALIGNMENT,4);let i=e.pixelWidth,s=e.pixelHeight,a=!!n[e.format];for(let n=0;n<e.resource.length;n++){let o=e.resource[n];a?r.compressedTexImage2D(r.TEXTURE_2D,n,t.internalFormat,i,s,0,o):r.texImage2D(r.TEXTURE_2D,n,t.internalFormat,i,s,0,t.format,t.type,o),i=Math.max(i>>1,1),s=Math.max(s>>1,1)}}}}),r("lX11F",function(t,r){e(t.exports,"glUploadImageResource",function(){return n});let n={id:"image",upload(e,t,r,n){let i=t.width,s=t.height,a=e.pixelWidth,o=e.pixelHeight,l=e.resourceWidth,u=e.resourceHeight;l<a||u<o?((i!==a||s!==o)&&r.texImage2D(t.target,0,t.internalFormat,a,o,0,t.format,t.type,null),2===n?r.texSubImage2D(r.TEXTURE_2D,0,0,0,l,u,t.format,t.type,e.resource):r.texSubImage2D(r.TEXTURE_2D,0,0,0,t.format,t.type,e.resource)):i===a||s===o?r.texSubImage2D(r.TEXTURE_2D,0,0,0,t.format,t.type,e.resource):2===n?r.texImage2D(t.target,0,t.internalFormat,a,o,0,t.format,t.type,e.resource):r.texImage2D(t.target,0,t.internalFormat,t.format,t.type,e.resource),t.width=a,t.height=o}}}),r("83NYD",function(r,n){e(r.exports,"glUploadVideoResource",function(){return s});var i=t("lX11F");let s={id:"video",upload(e,t,r,n){if(!e.isValid){r.texImage2D(t.target,0,t.internalFormat,1,1,0,t.format,t.type,null);return}(0,i.glUploadImageResource).upload(e,t,r,n)}}}),r("9iuoz",function(r,n){e(r.exports,"applyStyleParams",function(){return s});var i=t("56RG9");function s(e,t,r,n,s,a,o,l){if(!l||"repeat"!==e.addressModeU||"repeat"!==e.addressModeV||"repeat"!==e.addressModeW){let r=i.wrapModeToGlAddress[o?"clamp-to-edge":e.addressModeU],n=i.wrapModeToGlAddress[o?"clamp-to-edge":e.addressModeV],l=i.wrapModeToGlAddress[o?"clamp-to-edge":e.addressModeW];t[s](a,t.TEXTURE_WRAP_S,r),t[s](a,t.TEXTURE_WRAP_T,n),t.TEXTURE_WRAP_R&&t[s](a,t.TEXTURE_WRAP_R,l)}if(l&&"linear"===e.magFilter||t[s](a,t.TEXTURE_MAG_FILTER,i.scaleModeToGlFilter[e.magFilter]),r){if(!l||"linear"!==e.mipmapFilter){let r=i.mipmapScaleModeToGlFilter[e.minFilter][e.mipmapFilter];t[s](a,t.TEXTURE_MIN_FILTER,r)}}else t[s](a,t.TEXTURE_MIN_FILTER,i.scaleModeToGlFilter[e.minFilter]);if(n&&e.maxAnisotropy>1){let r=Math.min(e.maxAnisotropy,t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));t[s](a,n.TEXTURE_MAX_ANISOTROPY_EXT,r)}e.compare&&t[s](a,t.TEXTURE_COMPARE_FUNC,i.compareModeToGlCompare[e.compare])}}),r("56RG9",function(t,r){e(t.exports,"scaleModeToGlFilter",function(){return n}),e(t.exports,"mipmapScaleModeToGlFilter",function(){return i}),e(t.exports,"wrapModeToGlAddress",function(){return s}),e(t.exports,"compareModeToGlCompare",function(){return a});let n={linear:9729,nearest:9728},i={linear:{linear:9987,nearest:9985},nearest:{linear:9986,nearest:9984}},s={"clamp-to-edge":33071,repeat:10497,"mirror-repeat":33648},a={never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519}}),r("9MYEs",function(t,r){e(t.exports,"mapFormatToGlFormat",function(){return n});function n(e){return{r8unorm:e.RED,r8snorm:e.RED,r8uint:e.RED,r8sint:e.RED,r16uint:e.RED,r16sint:e.RED,r16float:e.RED,rg8unorm:e.RG,rg8snorm:e.RG,rg8uint:e.RG,rg8sint:e.RG,r32uint:e.RED,r32sint:e.RED,r32float:e.RED,rg16uint:e.RG,rg16sint:e.RG,rg16float:e.RG,rgba8unorm:e.RGBA,"rgba8unorm-srgb":e.RGBA,rgba8snorm:e.RGBA,rgba8uint:e.RGBA,rgba8sint:e.RGBA,bgra8unorm:e.RGBA,"bgra8unorm-srgb":e.RGBA,rgb9e5ufloat:e.RGB,rgb10a2unorm:e.RGBA,rg11b10ufloat:e.RGB,rg32uint:e.RG,rg32sint:e.RG,rg32float:e.RG,rgba16uint:e.RGBA,rgba16sint:e.RGBA,rgba16float:e.RGBA,rgba32uint:e.RGBA,rgba32sint:e.RGBA,rgba32float:e.RGBA,stencil8:e.STENCIL_INDEX8,depth16unorm:e.DEPTH_COMPONENT,depth24plus:e.DEPTH_COMPONENT,"depth24plus-stencil8":e.DEPTH_STENCIL,depth32float:e.DEPTH_COMPONENT,"depth32float-stencil8":e.DEPTH_STENCIL}}}),r("hFiih",function(r,n){e(r.exports,"mapFormatToGlInternalFormat",function(){return s});var i=t("4k0ap");function s(e,t){let r={},n=e.RGBA;return e instanceof(0,i.DOMAdapter).get().getWebGLRenderingContext()?t.srgb&&(r={"rgba8unorm-srgb":t.srgb.SRGB8_ALPHA8_EXT,"bgra8unorm-srgb":t.srgb.SRGB8_ALPHA8_EXT}):(r={"rgba8unorm-srgb":e.SRGB8_ALPHA8,"bgra8unorm-srgb":e.SRGB8_ALPHA8},n=e.RGBA8),{r8unorm:e.R8,r8snorm:e.R8_SNORM,r8uint:e.R8UI,r8sint:e.R8I,r16uint:e.R16UI,r16sint:e.R16I,r16float:e.R16F,rg8unorm:e.RG8,rg8snorm:e.RG8_SNORM,rg8uint:e.RG8UI,rg8sint:e.RG8I,r32uint:e.R32UI,r32sint:e.R32I,r32float:e.R32F,rg16uint:e.RG16UI,rg16sint:e.RG16I,rg16float:e.RG16F,rgba8unorm:e.RGBA,...r,rgba8snorm:e.RGBA8_SNORM,rgba8uint:e.RGBA8UI,rgba8sint:e.RGBA8I,bgra8unorm:n,rgb9e5ufloat:e.RGB9_E5,rgb10a2unorm:e.RGB10_A2,rg11b10ufloat:e.R11F_G11F_B10F,rg32uint:e.RG32UI,rg32sint:e.RG32I,rg32float:e.RG32F,rgba16uint:e.RGBA16UI,rgba16sint:e.RGBA16I,rgba16float:e.RGBA16F,rgba32uint:e.RGBA32UI,rgba32sint:e.RGBA32I,rgba32float:e.RGBA32F,stencil8:e.STENCIL_INDEX8,depth16unorm:e.DEPTH_COMPONENT16,depth24plus:e.DEPTH_COMPONENT24,"depth24plus-stencil8":e.DEPTH24_STENCIL8,depth32float:e.DEPTH_COMPONENT32F,"depth32float-stencil8":e.DEPTH32F_STENCIL8,...t.s3tc?{"bc1-rgba-unorm":t.s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT,"bc2-rgba-unorm":t.s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT,"bc3-rgba-unorm":t.s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT}:{},...t.s3tc_sRGB?{"bc1-rgba-unorm-srgb":t.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,"bc2-rgba-unorm-srgb":t.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,"bc3-rgba-unorm-srgb":t.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}:{},...t.rgtc?{"bc4-r-unorm":t.rgtc.COMPRESSED_RED_RGTC1_EXT,"bc4-r-snorm":t.rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT,"bc5-rg-unorm":t.rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT,"bc5-rg-snorm":t.rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}:{},...t.bptc?{"bc6h-rgb-float":t.bptc.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,"bc6h-rgb-ufloat":t.bptc.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,"bc7-rgba-unorm":t.bptc.COMPRESSED_RGBA_BPTC_UNORM_EXT,"bc7-rgba-unorm-srgb":t.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT}:{},...t.etc?{"etc2-rgb8unorm":t.etc.COMPRESSED_RGB8_ETC2,"etc2-rgb8unorm-srgb":t.etc.COMPRESSED_SRGB8_ETC2,"etc2-rgb8a1unorm":t.etc.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgb8a1unorm-srgb":t.etc.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgba8unorm":t.etc.COMPRESSED_RGBA8_ETC2_EAC,"etc2-rgba8unorm-srgb":t.etc.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,"eac-r11unorm":t.etc.COMPRESSED_R11_EAC,"eac-rg11unorm":t.etc.COMPRESSED_SIGNED_RG11_EAC}:{},...t.astc?{"astc-4x4-unorm":t.astc.COMPRESSED_RGBA_ASTC_4x4_KHR,"astc-4x4-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,"astc-5x4-unorm":t.astc.COMPRESSED_RGBA_ASTC_5x4_KHR,"astc-5x4-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR,"astc-5x5-unorm":t.astc.COMPRESSED_RGBA_ASTC_5x5_KHR,"astc-5x5-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,"astc-6x5-unorm":t.astc.COMPRESSED_RGBA_ASTC_6x5_KHR,"astc-6x5-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,"astc-6x6-unorm":t.astc.COMPRESSED_RGBA_ASTC_6x6_KHR,"astc-6x6-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,"astc-8x5-unorm":t.astc.COMPRESSED_RGBA_ASTC_8x5_KHR,"astc-8x5-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,"astc-8x6-unorm":t.astc.COMPRESSED_RGBA_ASTC_8x6_KHR,"astc-8x6-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,"astc-8x8-unorm":t.astc.COMPRESSED_RGBA_ASTC_8x8_KHR,"astc-8x8-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,"astc-10x5-unorm":t.astc.COMPRESSED_RGBA_ASTC_10x5_KHR,"astc-10x5-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,"astc-10x6-unorm":t.astc.COMPRESSED_RGBA_ASTC_10x6_KHR,"astc-10x6-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,"astc-10x8-unorm":t.astc.COMPRESSED_RGBA_ASTC_10x8_KHR,"astc-10x8-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,"astc-10x10-unorm":t.astc.COMPRESSED_RGBA_ASTC_10x10_KHR,"astc-10x10-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,"astc-12x10-unorm":t.astc.COMPRESSED_RGBA_ASTC_12x10_KHR,"astc-12x10-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,"astc-12x12-unorm":t.astc.COMPRESSED_RGBA_ASTC_12x12_KHR,"astc-12x12-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR}:{}}}}),r("4UEsw",function(t,r){e(t.exports,"mapFormatToGlType",function(){return n});function n(e){return{r8unorm:e.UNSIGNED_BYTE,r8snorm:e.BYTE,r8uint:e.UNSIGNED_BYTE,r8sint:e.BYTE,r16uint:e.UNSIGNED_SHORT,r16sint:e.SHORT,r16float:e.HALF_FLOAT,rg8unorm:e.UNSIGNED_BYTE,rg8snorm:e.BYTE,rg8uint:e.UNSIGNED_BYTE,rg8sint:e.BYTE,r32uint:e.UNSIGNED_INT,r32sint:e.INT,r32float:e.FLOAT,rg16uint:e.UNSIGNED_SHORT,rg16sint:e.SHORT,rg16float:e.HALF_FLOAT,rgba8unorm:e.UNSIGNED_BYTE,"rgba8unorm-srgb":e.UNSIGNED_BYTE,rgba8snorm:e.BYTE,rgba8uint:e.UNSIGNED_BYTE,rgba8sint:e.BYTE,bgra8unorm:e.UNSIGNED_BYTE,"bgra8unorm-srgb":e.UNSIGNED_BYTE,rgb9e5ufloat:e.UNSIGNED_INT_5_9_9_9_REV,rgb10a2unorm:e.UNSIGNED_INT_2_10_10_10_REV,rg11b10ufloat:e.UNSIGNED_INT_10F_11F_11F_REV,rg32uint:e.UNSIGNED_INT,rg32sint:e.INT,rg32float:e.FLOAT,rgba16uint:e.UNSIGNED_SHORT,rgba16sint:e.SHORT,rgba16float:e.HALF_FLOAT,rgba32uint:e.UNSIGNED_INT,rgba32sint:e.INT,rgba32float:e.FLOAT,stencil8:e.UNSIGNED_BYTE,depth16unorm:e.UNSIGNED_SHORT,depth24plus:e.UNSIGNED_INT,"depth24plus-stencil8":e.UNSIGNED_INT_24_8,depth32float:e.FLOAT,"depth32float-stencil8":e.FLOAT_32_UNSIGNED_INT_24_8_REV}}}),r("fSBSb",function(t,r){e(t.exports,"color32BitToUniform",function(){return n});function n(e,t,r){let n=(e>>24&255)/255;t[r++]=(255&e)/255*n,t[r++]=(e>>8&255)/255*n,t[r++]=(e>>16&255)/255*n,t[r++]=n}}),r("iFPuJ",function(t,r){e(t.exports,"BatchableSprite",function(){return n});class n{constructor(){this.batcherName="default",this.topology="triangle-list",this.attributeSize=4,this.indexSize=6,this.packAsQuad=!0,this.roundPixels=0,this._attributeStart=0,this._batcher=null,this._batch=null}get blendMode(){return this.renderable.groupBlendMode}get color(){return this.renderable.groupColorAlpha}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.bounds=null}}})}();
//# sourceMappingURL=WebGLRenderer.35bd98d1.js.map
